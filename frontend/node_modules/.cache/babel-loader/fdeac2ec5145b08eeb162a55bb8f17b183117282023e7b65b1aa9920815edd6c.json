{"ast":null,"code":"var _jsxFileName = \"E:\\\\LMS\\\\frontend\\\\src\\\\pages\\\\EmployeeDashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport LeaveBalance from \"../components/Employee/LeaveBalance\";\nimport LeaveApplication from \"../components/Employee/LeaveApplication\";\nimport LeaveStatus from \"../components/Employee/LeaveStatus\";\nimport CalendarWithToggle from \"../components/Employee/CalendarWithToggle\";\nimport { getLeaveBalance, getMyLeaves } from \"../services/api\";\nimport { useAuth } from \"../context/AuthContext\";\nimport \"../components/Employee/EmployeeDashboard.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EmployeeDashboard = () => {\n  _s();\n  const [leaveBalance, setLeaveBalance] = useState(null);\n  const [leaves, setLeaves] = useState([]);\n  const [refresh, setRefresh] = useState(false);\n  const {\n    logout,\n    user\n  } = useAuth();\n  useEffect(() => {\n    fetchLeaveBalance();\n    fetchLeaves();\n    // eslint-disable-next-line\n  }, [refresh]);\n  const fetchLeaveBalance = async () => {\n    try {\n      const res = await getLeaveBalance();\n      setLeaveBalance(res.data);\n    } catch {\n      setLeaveBalance({\n        earnedLeave: 0,\n        sickLeave: 12,\n        casualLeave: 12\n      });\n    }\n  };\n  const getEarnedLeave = joiningDate => {\n    if (!joiningDate) return 0;\n    const joining = new Date(joiningDate);\n    const now = new Date();\n    // Calculate the difference in full years\n    const years = now.getFullYear() - joining.getFullYear() - (now.getMonth() < joining.getMonth() || now.getMonth() === joining.getMonth() && now.getDate() < joining.getDate() ? 1 : 0);\n    return years >= 1 ? 12 : 0;\n  };\n  console.log(\"User object:\", user);\n  console.log(\"User joiningDate:\", user === null || user === void 0 ? void 0 : user.joiningDate);\n  // Usage:\n  const earnedLeave = getEarnedLeave(user.joiningDate);\n  const fetchLeaves = async () => {\n    try {\n      const res = await getMyLeaves();\n      setLeaves(res.data);\n    } catch {\n      setLeaves([]);\n    }\n  };\n  const handleLeaveSubmitted = () => {\n    setRefresh(r => !r);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"employee-dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header\",\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        alignItems: \"center\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Leave Management System\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: logout,\n        className: \"logout-btn\",\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        alignItems: \"flex-start\",\n        gap: \"32px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 2\n        },\n        children: [leaveBalance && /*#__PURE__*/_jsxDEV(LeaveBalance, {\n          earnedLeave: getEarnedLeave(user === null || user === void 0 ? void 0 : user.joiningDate),\n          sickLeave: leaveBalance.sickLeave,\n          casualLeave: leaveBalance.casualLeave\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(LeaveApplication, {\n          onLeaveSubmitted: handleLeaveSubmitted\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(LeaveStatus, {\n          leaves: leaves\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          flex: 1,\n          minWidth: 350\n        },\n        children: /*#__PURE__*/_jsxDEV(CalendarWithToggle, {\n          user: user\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(EmployeeDashboard, \"pVLjoaPo6tQHAzNIIsov/yI91GE=\", false, function () {\n  return [useAuth];\n});\n_c = EmployeeDashboard;\nexport default EmployeeDashboard;\nvar _c;\n$RefreshReg$(_c, \"EmployeeDashboard\");","map":{"version":3,"names":["React","useState","useEffect","LeaveBalance","LeaveApplication","LeaveStatus","CalendarWithToggle","getLeaveBalance","getMyLeaves","useAuth","jsxDEV","_jsxDEV","EmployeeDashboard","_s","leaveBalance","setLeaveBalance","leaves","setLeaves","refresh","setRefresh","logout","user","fetchLeaveBalance","fetchLeaves","res","data","earnedLeave","sickLeave","casualLeave","getEarnedLeave","joiningDate","joining","Date","now","years","getFullYear","getMonth","getDate","console","log","handleLeaveSubmitted","r","className","children","style","display","justifyContent","alignItems","fileName","_jsxFileName","lineNumber","columnNumber","onClick","gap","flex","onLeaveSubmitted","minWidth","_c","$RefreshReg$"],"sources":["E:/LMS/frontend/src/pages/EmployeeDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport LeaveBalance from \"../components/Employee/LeaveBalance\";\r\nimport LeaveApplication from \"../components/Employee/LeaveApplication\";\r\nimport LeaveStatus from \"../components/Employee/LeaveStatus\";\r\nimport CalendarWithToggle from \"../components/Employee/CalendarWithToggle\";\r\nimport { getLeaveBalance, getMyLeaves } from \"../services/api\";\r\nimport { useAuth } from \"../context/AuthContext\";\r\nimport \"../components/Employee/EmployeeDashboard.css\";\r\n\r\nconst EmployeeDashboard = () => {\r\n  const [leaveBalance, setLeaveBalance] = useState(null);\r\n  const [leaves, setLeaves] = useState([]);\r\n  const [refresh, setRefresh] = useState(false);\r\n  const { logout, user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    fetchLeaveBalance();\r\n    fetchLeaves();\r\n    // eslint-disable-next-line\r\n  }, [refresh]);\r\n\r\n  const fetchLeaveBalance = async () => {\r\n    try {\r\n      const res = await getLeaveBalance();\r\n      setLeaveBalance(res.data);\r\n    } catch {\r\n      setLeaveBalance({ earnedLeave: 0, sickLeave: 12, casualLeave: 12 });\r\n    }\r\n  };\r\n\r\n  const getEarnedLeave = (joiningDate) => {\r\n  if (!joiningDate) return 0;\r\n  const joining = new Date(joiningDate);\r\n  const now = new Date();\r\n  // Calculate the difference in full years\r\n  const years =\r\n    now.getFullYear() -\r\n    joining.getFullYear() -\r\n    (now.getMonth() < joining.getMonth() ||\r\n    (now.getMonth() === joining.getMonth() && now.getDate() < joining.getDate())\r\n      ? 1\r\n      : 0);\r\n  return years >= 1 ? 12 : 0;\r\n};\r\nconsole.log(\"User object:\", user);\r\nconsole.log(\"User joiningDate:\", user?.joiningDate);\r\n// Usage:\r\nconst earnedLeave = getEarnedLeave(user.joiningDate); \r\n\r\n  const fetchLeaves = async () => {\r\n    try {\r\n      const res = await getMyLeaves();\r\n      setLeaves(res.data);\r\n    } catch {\r\n      setLeaves([]);\r\n    }\r\n  };\r\n\r\n  const handleLeaveSubmitted = () => {\r\n    setRefresh((r) => !r);\r\n  };\r\n\r\n  return (\r\n    <div className=\"employee-dashboard\">\r\n      <div className=\"header\" style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\" }}>\r\n        <h1>Leave Management System</h1>\r\n        <button onClick={logout} className=\"logout-btn\">Logout</button>\r\n      </div>\r\n      <div style={{ display: \"flex\", alignItems: \"flex-start\", gap: \"32px\" }}>\r\n        <div style={{ flex: 2 }}>\r\n          {leaveBalance && (\r\n            <LeaveBalance\r\n               earnedLeave={getEarnedLeave(user?.joiningDate)}\r\n              sickLeave={leaveBalance.sickLeave}\r\n              casualLeave={leaveBalance.casualLeave}\r\n            />\r\n          )}\r\n          <LeaveApplication onLeaveSubmitted={handleLeaveSubmitted} />\r\n          <LeaveStatus leaves={leaves} />\r\n        </div>\r\n        <div style={{ flex: 1, minWidth: 350 }}>\r\n          <CalendarWithToggle user={user} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmployeeDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}